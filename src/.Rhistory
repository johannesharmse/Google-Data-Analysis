knitr::opts_chunk$set(echo = TRUE)
marathon<- read.csv2(url("https://raw.github.ubc.ca/ubc-mds-2017/DSCI_561_regr-1_students/master/labs/lab1/marathonfull.csv?token=AAADl7G-FRyACNdlv4H2Q2aYe9b0f8KLks5aKHw5wA%3D%3D"), header=TRUE, sep=",")
library(tidyverse)
marathon_ful<- marathon %>%
filter(cohort1 == 1) %>%
select(c(age, bmi, female, footwear, group, injury, mf_d, mf_di, mf_ti,  max, sprint, tempo))%>% mutate(mf_s = mf_d/mf_ti)
View(marathon_ful)
knitr::opts_chunk$set(echo = TRUE, message = FALSE, fig.show = "animate")
library(tidyverse)
library(rjson)
library(lubridate)
library(forcats)
library(countrycode)
# devtools::install_github("dgrtwo/gganimate")
library(gganimate)
library(ggmap)
library(animation)
library(NLP)
library(stringr)
browse_hist <- fromJSON(file = "../data/Chrome/BrowserHistory.json")
location_hist <- fromJSON(file = "../data/Location History/Location History.json")
browse_df <- data_frame(time = sapply(1:length(browse_hist[[1]]), function(x) browse_hist[[1]][[x]]$time_usec),
page_transition = sapply(1:length(browse_hist[[1]]), function(x) browse_hist[[1]][[x]]$page_transition),
title = sapply(1:length(browse_hist[[1]]), function(x) browse_hist[[1]][[x]]$title),
url = sapply(1:length(browse_hist[[1]]), function(x) browse_hist[[1]][[x]]$url))
location_df <- data_frame(time = sapply(1:length(location_hist[[1]]), function(x) location_hist[[1]][[x]]$timestampMs),
lat = sapply(1:length(location_hist[[1]]), function(x) location_hist[[1]][[x]]$latitudeE7),
long = sapply(1:length(location_hist[[1]]), function(x) location_hist[[1]][[x]]$longitudeE7),
accuracy = sapply(1:length(location_hist[[1]]), function(x) location_hist[[1]][[x]]$accuracy),
altitude = sapply(1:length(location_hist[[1]]), function(x) location_hist[[1]][[x]]$altitude))
rm(browse_hist, location_hist)
location_df <- location_df %>%
mutate(time = as_datetime(as.numeric(time)/1000),
long = round(long/10^7, 3),
lat = round(lat/10^7, 3))
browse_summary <- browse_df %>%
mutate(time = as_datetime(as.numeric(time)/1000000))
location_summary <- location_df %>%
arrange(time) %>%
mutate(lag_lat = lag(lat), lag_long = lag(long), day = ymd(substr(as.character(time), 1, 10))) %>%
select(time, lag_lat, lat, lag_long, long, day)
location_summary <- location_summary %>%
distinct(lat, long, .keep_all = TRUE)
browse_time_range = c(min(browse_summary$time), max(browse_summary$time))
location_time_range = c(min(location_summary$time), max(location_summary$time))
browse_summary <- browse_summary %>%
filter(time >= max(c(browse_time_range[1], location_time_range[1])) &
time <= min(c(browse_time_range[2], location_time_range[2]))) %>%
arrange(time)
location_summary <- location_summary %>%
filter(time >= max(c(browse_time_range[1], location_time_range[1])) &
time <= min(c(browse_time_range[2], location_time_range[2]))) %>%
arrange(time)
View(browse_summary)
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google..search', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google*search', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search', ignore_case = TRUE)))
View(test)
View(browse_summary)
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query', ignore_case = TRUE)))
View(test)
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query|Google\ Play\ Music', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query|.*?Google\ Play\ Music*?, ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query|.*?Google\ Play\ Music.*?', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query|.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query|^.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter(str_detect(url, regex('google.*?search|youtube.*?search_query', ignore_case = TRUE)) &
str_detect(title, regex('^.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter((str_detect(url, regex('google.*?search|youtube.*?search_query', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE))) |
str_detect(title, regex('^.*?Google\ Play\ Music$', ignore_case = TRUE)))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter((str_detect(url, regex('google.*?search|youtube.*?search_query', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE))) |
(str_detect(title, regex('^.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(title, regex('Home - Google Play Music', ignore_case = TRUE))))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter((str_detect(url, regex('google.*?search|youtube.*?search_query', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE))) |
(str_detect(title, regex('^.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(title, regex('Home - Google Play Music|Google Play Music', ignore_case = TRUE))))
View(test)
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter((str_detect(url, regex('google.*?search|youtube.*?search_query', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE))) |
(str_detect(title, regex('^.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(title, regex('^Home - Google Play Music$|^Google Play Music$', ignore_case = TRUE))))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
test <- browse_summary %>%
filter((str_detect(url, regex('google.*?search|youtube.*?watch', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE))) |
(str_detect(title, regex('^.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(title, regex('^Home - Google Play Music$|^Google Play Music$', ignore_case = TRUE))))
# browse_summary <- browse_summary %>%
#   filter(!str_detect(title, regex('gmail|insta|facebook|broadreach|gumtree|bitbucket|jira|opportunity|linkedin|confluence|messenger|scotia|outlook|absa|new tab|eset|jokesphone|quicket|gckey|onedrive', ignore_case = TRUE))&
#            !str_detect(url, regex('brhc|campbellco|cic|nhls|dropbox|scotiabank|absa|drive.google|facebook|insta|gmail', ignore_case = TRUE)))
browse_summary <- browse_summary %>%
filter((str_detect(url, regex('google.*?search|youtube.*?watch', ignore_case = TRUE)) &
!str_detect(url, regex('mail', ignore_case = TRUE))) |
(str_detect(title, regex('^.*?Google\ Play\ Music$', ignore_case = TRUE)) &
!str_detect(title, regex('^Home - Google Play Music$|^Google Play Music$', ignore_case = TRUE))))
rm(location_df, browse_df)
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "terrain", source = "google", size = c(360, 240), scale = 1) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "roadmap", source = "google", size = c(360, 240), scale = 1) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
mapData <- get_map(center = c(0, 0), zoom = 1, maptype = "roadmap", source = "google", size = c(360, 240), scale = 1) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "roadmap", size = c(360, 240), scale = 1) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "roadmap", source = "google", size = c(360, 240), scale = 1)
# mapData <- map_data("world") %>%
# 		mutate(ISO = countrycode(region, "country.name", "iso2c"),
# 		       lat_cat = lat,
# 		       long_cat = long)
#mapData <- get_map(location = c(-122.080954, 36.971709), maptype = "terrain", source = "google", zoom = 14)
# mapData <- get_googlemap(center = c(0, 0), # center = c(location_summary$lag_long[[2]], location_summary$lag_lat[[2]]),
#   maptype = "roadmap",
#                          zoom = 1,
#                          size = c(144, 144), scale = 1)
# # ggplot(location_summary, colour = time) +
#   ggmap(mapData) +
#     ggplot(location_summary[1:1000, ], frame = time) +
#   geom_segment(data = location_summary, aes(x = lag_long, xend = long, y = lag_lat, yend = lat, colour = time))
ggmap(mapData) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "hybrid", source = "google", size = c(360, 240), scale = 1)
# mapData <- map_data("world") %>%
# 		mutate(ISO = countrycode(region, "country.name", "iso2c"),
# 		       lat_cat = lat,
# 		       long_cat = long)
#mapData <- get_map(location = c(-122.080954, 36.971709), maptype = "terrain", source = "google", zoom = 14)
# mapData <- get_googlemap(center = c(0, 0), # center = c(location_summary$lag_long[[2]], location_summary$lag_lat[[2]]),
#   maptype = "roadmap",
#                          zoom = 1,
#                          size = c(144, 144), scale = 1)
# # ggplot(location_summary, colour = time) +
#   ggmap(mapData) +
#     ggplot(location_summary[1:1000, ], frame = time) +
#   geom_segment(data = location_summary, aes(x = lag_long, xend = long, y = lag_lat, yend = lat, colour = time))
ggmap(mapData) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "hybrid", source = "google", size = c(360, 240), scale = 1)
# mapData <- map_data("world") %>%
# 		mutate(ISO = countrycode(region, "country.name", "iso2c"),
# 		       lat_cat = lat,
# 		       long_cat = long)
#mapData <- get_map(location = c(-122.080954, 36.971709), maptype = "terrain", source = "google", zoom = 14)
# mapData <- get_googlemap(center = c(0, 0), # center = c(location_summary$lag_long[[2]], location_summary$lag_lat[[2]]),
#   maptype = "roadmap",
#                          zoom = 1,
#                          size = c(144, 144), scale = 1)
# # ggplot(location_summary, colour = time) +
#   ggmap(mapData) +
#     ggplot(location_summary[1:1000, ], frame = time) +
#   geom_segment(data = location_summary, aes(x = lag_long, xend = long, y = lag_lat, yend = lat, colour = time))
ggmap(mapData) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long))) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "hybrid", source = "google", size = c(360, 240), scale = 1)
# mapData <- map_data("world") %>%
# 		mutate(ISO = countrycode(region, "country.name", "iso2c"),
# 		       lat_cat = lat,
# 		       long_cat = long)
#mapData <- get_map(location = c(-122.080954, 36.971709), maptype = "terrain", source = "google", zoom = 14)
# mapData <- get_googlemap(center = c(0, 0), # center = c(location_summary$lag_long[[2]], location_summary$lag_lat[[2]]),
#   maptype = "roadmap",
#                          zoom = 1,
#                          size = c(144, 144), scale = 1)
# # ggplot(location_summary, colour = time) +
#   ggmap(mapData) +
#     ggplot(location_summary[1:1000, ], frame = time) +
#   geom_segment(data = location_summary, aes(x = lag_long, xend = long, y = lag_lat, yend = lat, colour = time))
ggmap(mapData) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "hybrid", source = "google", size = c(360, 240), scale = 1)
# mapData <- map_data("world") %>%
# 		mutate(ISO = countrycode(region, "country.name", "iso2c"),
# 		       lat_cat = lat,
# 		       long_cat = long)
#mapData <- get_map(location = c(-122.080954, 36.971709), maptype = "terrain", source = "google", zoom = 14)
# mapData <- get_googlemap(center = c(0, 0), # center = c(location_summary$lag_long[[2]], location_summary$lag_lat[[2]]),
#   maptype = "roadmap",
#                          zoom = 1,
#                          size = c(144, 144), scale = 1)
# # ggplot(location_summary, colour = time) +
#   ggmap(mapData) +
#     ggplot(location_summary[1:1000, ], frame = time) +
#   geom_segment(data = location_summary, aes(x = lag_long, xend = long, y = lag_lat, yend = lat, colour = time))
ggmap(mapData) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
mapData <- get_googlemap(center = c(0, 0), zoom = 1, maptype = "hybrid", source = "google", size = c(360, 240), scale = 1)
# mapData <- map_data("world") %>%
# 		mutate(ISO = countrycode(region, "country.name", "iso2c"),
# 		       lat_cat = lat,
# 		       long_cat = long)
#mapData <- get_map(location = c(-122.080954, 36.971709), maptype = "terrain", source = "google", zoom = 14)
# mapData <- get_googlemap(center = c(0, 0), # center = c(location_summary$lag_long[[2]], location_summary$lag_lat[[2]]),
#   maptype = "roadmap",
#                          zoom = 1,
#                          size = c(144, 144), scale = 1)
# # ggplot(location_summary, colour = time) +
#   ggmap(mapData) +
#     ggplot(location_summary[1:1000, ], frame = time) +
#   geom_segment(data = location_summary, aes(x = lag_long, xend = long, y = lag_lat, yend = lat, colour = time))
ggmap(mapData) +
scale_x_continuous(limits = c(min(location_summary$long), max(location_summary$long)), expand = c(0, 0)) +
scale_y_continuous(limits = c(min(location_summary$lat), max(location_summary$lat)), expand = c(0, 0))
View(browse_summary)
View(location_summary)
View(browse_summary)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_import.R', echo=TRUE)
library(stringr)
str_detect(location_locs[2], pattern = ".json")
str_detect(location_locs[2], pattern = ".rds")
source('~/Personal Study/Google_Location_Analysis/src/data_import.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_analysis.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_analysis.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_analysis.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
get_googlemap("UBC", zoom = 15)
test = get_googlemap("UBC", zoom = 15)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
test = get_googlemap("UBC", zoom = 15)
View(location_summary)
source('~/Personal Study/Google_Location_Analysis/src/data_analysis.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
View(location_summary)
source('~/Personal Study/Google_Location_Analysis/src/data_analysis.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
test = get_map("Vancouver", zoom = 10, source = "google", maptype = "roadtype")
test = get_map("Vancouver", zoom = 10, source = "google", maptype = "roadmap")
ggmap(test)
test
ggmap(test)
ggmap(test, darken = 0.5)
test = get_map("Vancouver", zoom = 10, source = "osm", maptype = "roadmap")
test = get_map("Vancouver", zoom = 10, source = "osm")
test = get_map("Vancouver", zoom = 10, source = "stamen", maptype = "terrain")
distQueryCheck()
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
distQueryCheck()
geocodeQueryCheck()
geocode("Cape Town", source = "dsk")
?mapdata::map
install.packages("mapdata")
?mapdata::map
?mapdata::map
?mapdata::map_data
help(package='maps')
data(world.cities)
library(maps)
data(world.cities)
world.cities
geocodeQueryCheck()
get_googlemap("Cape Town")
geocodeQueryCheck()
get_googlemap("Cape Town", zoom = 15)
geocodeQueryCheck()
?annotation_custom
geocodeQueryCheck()
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
geocodeQueryCheck()
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
geocodeQueryCheck()
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
geocodeQueryCheck()
geocodeQueryCheck()
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
ggmap(get_googlemap("Vancouver", zoom = 10))
test = get_googlemap("Vancouver", zoom = 10)
seq(-124, -123, length.out = 5)
test2 = ggmap(test)
attr(test2, which = lon)
test2$lon
test2[[data]]$lon
test2[data]$lon
test2$data$lon
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
dev.list()
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
dev.list()
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
ggmap(test, extent = "normal")
ggmap(test, extent = "extent")
ggmap(test, extent = "device")
ggmap(test, extent = "extent")
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
install.packages("cleanNLP")
View(browse_summary)
text = paste(browse_summary, collapse = " ")
text = as.String(text)
library(NLP)
text = as.String(text)
text = words(browse_summary$title)
text = words(as.String(browse_summary$title))
?NLP
??NLP
library(magrittr)
text = words(browse_summary$title)
install.packages("openNLP")
library(openNLP)
text = words(browse_summary$title)
str_detect("abc", "b")
library(stringr)
str_detect("abc", "b")
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$"))
str_locate("apple", "p")
str_locate("apple", "p")[1,1]
source('~/Personal Study/Google_Location_Analysis/src/data_visualization.R', echo=TRUE)
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1))
ymd(browse_summary$time[1])
day(browse_summary$time[1])
time(browse_summary$time[1])
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1)) %>%
distinct(str_sub(time, 1, 13), title, .keep_all = TRUE)
browse_summary$time[1]
browse_summary <- readRDS(file = "../data/R_temp/browse_summary.rds")
as.character(browse_summary$time[1])
browse_summary$time[1]
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1)) %>%
distinct(str_sub(time, 1, 13), title, .keep_all = TRUE)
browse_summary <- readRDS(file = "../data/R_temp/browse_summary.rds")
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1)) %>%
distinct(str_sub(time, 1, 13), title, .keep_all = TRUE) %>%
mutate(str_split(title))
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1)) %>%
distinct(str_sub(time, 1, 13), title, .keep_all = TRUE) %>%
mutate(str_split(title, " "))
table(browse_summary[ , ncol(browse_summary)])
table(browse_summary[ , "title"])
browse_summary[1, ncol(browse_summary)]
browse_summary[1, ncol(browse_summary)][1]
browse_summary[1, ncol(browse_summary)][[1]]
unique(unlist(browse_summary[ , ncol(browse_summary)]))
count(browse_summary$`str_split(title, " ")`, unique(unlist(browse_summary[ , ncol(browse_summary)]))
count(browse_summary$`str_split(title, " ")`, unique(unlist(browse_summary[ , ncol(browse_summary)])))
count(data_frame(browse_summary$`str_split(title, " ")`), unique(unlist(browse_summary[ , ncol(browse_summary)]))
count(data_frame(browse_summary$`str_split(title, " ")`), unique(unlist(browse_summary[ , ncol(browse_summary)])))
count(data_frame(browse_summary$`str_split(title, " ")`), unique(unlist(browse_summary[ , ncol(browse_summary)])))
table(unlist(browse_summary[ , ncol(browse_summary)]))
browse_summary <- readRDS(file = "../data/R_temp/browse_summary.rds")
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1)) %>%
distinct(str_sub(time, 1, 13), title, .keep_all = TRUE) %>%
mutate(words = str_split(title), pattern = " ",
phrases = str_split(title, pattern = ".* .*"))
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1)) %>%
distinct(str_sub(time, 1, 13), title, .keep_all = TRUE) %>%
mutate(words = str_split(title, pattern = " "),
phrases = str_split(title, pattern = ".* .*"))
str_split("awe cool fok", pattern = " .* ")
str_c("awe cool fok", pattern = " .* ")
browse_summary <- readRDS(file = "../data/R_temp/browse_summary.rds")
browse_summary <- browse_summary %>%
filter(str_detect(title, " - Google Search$")) %>%
mutate(title = str_sub(title, 1, str_locate(title, " - Google Search")[ ,1] - 1)) %>%
distinct(str_sub(time, 1, 13), title, .keep_all = TRUE) %>%
mutate(words = str_split(title, pattern = " "))
